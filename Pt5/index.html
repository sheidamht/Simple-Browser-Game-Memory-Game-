<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RGB Color Guess</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');

body {
  margin: 0;
  font-family: 'Baloo 2', cursive;
  background: linear-gradient(45deg, #e8bfef, #b4c4ed, #cbf3e5, #ebf0c5);
  background-size: 400% 400%;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  color: #333;
  overflow: hidden;
  animation: gradientBG 20s ease infinite;
}

@keyframes gradientBG {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}

h1 {
  margin-top: 1.5rem;
  font-size: 3rem;
  text-shadow: 3px 3px 15px rgba(0,0,0,0.2);
  text-align: center;
}

#colorDisplay {
  font-weight: bold;
  font-size: 2.2rem;
  margin: 1rem 0;
  color: #556b2f;
  text-shadow: 1px 1px 6px #fff;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.2);}
}

.btn {
  padding: 0.7rem 1.4rem;
  margin: 0.5rem;
  background: #9fc08a;
  color: #fff;
  border: none;
  border-radius: 14px;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s, background 0.3s, box-shadow 0.3s;
}
.btn:hover {
  transform: scale(1.15) rotate(-5deg);
  background: #a4ba78;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
}

.container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 700px;
  margin-top: 1.5rem;
  gap: 1rem;
}

.square {
  width: 130px;
  height: 130px;
  border-radius: 25px;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s, filter 0.3s;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
  position: relative;
}
.square:hover {
  transform: scale(1.15);
  box-shadow: 0 12px 30px rgba(0,0,0,0.5);
  filter: brightness(1.2) drop-shadow(0 0 10px #fff);
}

.square.correct {
  box-shadow: 0 0 25px 5px yellow;
  animation: glow 1.5s infinite alternate;
}

@keyframes glow {
  0% {box-shadow: 0 0 20px 5px #ffff00;}
  100% {box-shadow: 0 0 35px 15px #ffff66;}
}

#message {
  margin-top: 1rem;
  font-size: 1.6rem;
  min-height: 2rem;
  transition: transform 0.3s;
}

.success {
  color: #006400;
  transform: scale(1.4);
}

.fail {
  color: #b22222;
  transform: scale(1.2);
}

#scoreboard {
  margin-top: 1rem;
  font-size: 1.4rem;
  font-weight: bold;
}

#timer {
  margin-top: 0.5rem;
  font-size: 1.2rem;
  color: #444;
}

#leaderboard {
  margin-top: 1rem;
  font-size: 1rem;
  text-align: center;
  background: rgba(255,255,255,0.7);
  padding: 0.5rem 1rem;
  border-radius: 12px;
}

.confetti-piece {
  position: absolute;
  width: 10px;
  height: 10px;
  background: red;
  opacity: 0.9;
  pointer-events: none;
  border-radius: 50%;
  animation: confettiAnim 1s forwards;
}

@keyframes confettiAnim {
  0% { transform: translate(0,0) rotate(0deg); opacity: 1; }
  100% { transform: translate(calc(-100px + 200px*var(--randX)), calc(-150px - 100px*var(--randY))) rotate(720deg); opacity: 0; }
}
</style>
</head>
<body>

<h1>RGB Color Guess </h1>
<button class="btn" id="startBtn">Start Game</button>
<div id="colorDisplay" style="display:none;">RGB(?,?,?)</div>
<div>
  <button class="btn" id="reset" style="display:none;">New Game</button>
</div>
<div class="container" id="container"></div>
<div id="message"></div>
<div id="scoreboard">Score: 0 | Level: 1</div>
<div id="timer">Time: 20s</div>
<div id="leaderboard">High Score: 0</div>

<script>
const container = document.getElementById('container');
const colorDisplay = document.getElementById('colorDisplay');
const message = document.getElementById('message');
const resetBtn = document.getElementById('reset');
const startBtn = document.getElementById('startBtn');
const scoreboard = document.getElementById('scoreboard');
const timerEl = document.getElementById('timer');
const leaderboardEl = document.getElementById('leaderboard');

let audioCtx;
let score = 0, level = 1, time = 20;
let timerInterval, colors = [], pickedColor;
let highScore = localStorage.getItem('highScore') || 0;
leaderboardEl.textContent = `High Score: ${highScore}`;

function randomColor() {
  const r=Math.floor(Math.random()*256);
  const g=Math.floor(Math.random()*256);
  const b=Math.floor(Math.random()*256);
  return `rgb(${r}, ${g}, ${b})`;
}

function generateColors(num){ let arr=[]; for(let i=0;i<num;i++){arr.push(randomColor());} return arr; }
function pickColor(){ return colors[Math.floor(Math.random()*colors.length)]; }

function playSound(frequency,duration){
  const oscillator = audioCtx.createOscillator();
  const gainNode = audioCtx.createGain();
  oscillator.connect(gainNode);
  gainNode.connect(audioCtx.destination);
  oscillator.type = 'square';
  oscillator.frequency.setValueAtTime(frequency,audioCtx.currentTime);
  gainNode.gain.setValueAtTime(0.1,audioCtx.currentTime);
  oscillator.start();
  oscillator.stop(audioCtx.currentTime+duration);
}

function createConfetti(square){
  for(let i=0;i<40;i++){
    const confetti = document.createElement('div');
    confetti.classList.add('confetti-piece');
    confetti.style.backgroundColor = `hsl(${Math.random()*360},70%,60%)`;
    confetti.style.left = Math.random()*square.offsetWidth+'px';
    confetti.style.top = Math.random()*square.offsetHeight+'px';
    confetti.style.setProperty('--randX', Math.random());
    confetti.style.setProperty('--randY', Math.random());
    container.appendChild(confetti);
    setTimeout(()=> confetti.remove(),1200);
  }
  playSound(880,0.3); // Confetti sound
}

function setupSquares(){
  container.innerHTML='';
  colors.forEach(color=>{
    const square=document.createElement('div');
    square.classList.add('square');
    square.style.backgroundColor=color;
    square.addEventListener('click',()=>{
      if(color===pickedColor){
        message.textContent='Correct! ðŸŽ‰'; message.className='success';
        container.querySelectorAll('.square').forEach(sq=>{sq.style.backgroundColor=pickedColor; sq.classList.add('correct');});
        createConfetti(square);
        playSound(523,0.2); // Correct sound
        score+=10; if(score>highScore){highScore=score; localStorage.setItem('highScore',highScore); leaderboardEl.textContent=`High Score: ${highScore}`;}
        setTimeout(nextLevel,1200);
      } else {
        message.textContent='Try Again ðŸ˜¢'; message.className='fail';
        square.style.backgroundColor='#f0f0f0';
        playSound(220,0.2); // Wrong sound
        score-=5; if(score<0)score=0;
      }
      updateScoreboard();
    });
    container.appendChild(square);
  });
}

function updateScoreboard(){ scoreboard.textContent=`Score: ${score} | Level: ${level}`; }

function startTimer(){
  clearInterval(timerInterval);
  time=20; timerEl.textContent=`Time: ${time}s`;
  timerInterval=setInterval(()=>{
    time--; timerEl.textContent=`Time: ${time}s`;
    if(time<=0){ clearInterval(timerInterval); message.textContent='Time\'s up! ðŸ˜¢'; message.className='fail'; setTimeout(nextLevel,1000);}
  },1000);
}

function nextLevel(){
  level++;
  colors=generateColors(6+(level-1)*3);
  pickedColor=pickColor();
  colorDisplay.textContent=pickedColor.toUpperCase();
  message.textContent=''; message.className='';
  setupSquares();
  startTimer();
  updateScoreboard();
}

function reset(){
  score=0; level=1; colors=generateColors(6); pickedColor=pickColor();
  colorDisplay.textContent=pickedColor.toUpperCase(); message.textContent=''; message.className='';
  setupSquares(); startTimer(); updateScoreboard();
}

// Start button initializes AudioContext
startBtn.addEventListener('click',()=>{
  audioCtx = new (window.AudioContext||window.webkitAudioContext)();
  startBtn.style.display='none';
  colorDisplay.style.display='block';
  resetBtn.style.display='inline-block';
  reset();
});

resetBtn.addEventListener('click',reset);
</script>
</body>
</html>


